import{a as e,R as t,b as n,c as a,d as l,e as r,f as o,g as s,u as c,_ as u,r as i,L as d,B as m,S as g,h,i as E,j as p}from"./vendor.1efc8b53.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var f=e.create({baseURL:"https://pinash.herokuapp.com/api/",headers:{authToken:localStorage.getItem("authToken"),"Content-type":"Application/json"}});t({key:"countState",default:0});const b=n({key:"authUserState",get:async({get:e})=>{const t=e(v);if(!t)return{isLoggedIn:!1,user:null,msg:"Not logged in"};try{const e=await f.get("auth/authUser",{headers:{authToken:t}});return console.log(e.data),e.data}catch(n){throw n}}}),v=t({key:"tokenState",default:null}),k=t({key:"baseUrlState",default:"/pinpin-react-ts/"});t({key:"usersState",default:[{id:1,name:"Ashik"},{id:2,name:"Ash"}]});const y=()=>{var e,t;const n=a(k),c=l(b),[u,i]=r(v);switch(c.state){case"hasValue":return(null==(e=c.contents)?void 0:e.isLoggedIn)?o.createElement("div",null,o.createElement("h1",null,null==(t=c.contents)?void 0:t.user.username),o.createElement("button",{onClick:()=>{localStorage.removeItem("authToken"),i(null)}},"Logout")):o.createElement(s,{to:n+"login"});case"loading":return o.createElement("div",null,"Loading...");case"hasError":return o.createElement(s,{to:n+"login"})}},L=()=>{const e=c(),t=a(k);return o.createElement("div",null,o.createElement("h1",null,"Home"),o.createElement("button",{onClick:()=>e.push(t+"login")},"Go Login"))},S=()=>{var e;const t=a(k),n=c(),[u,d]=i.exports.useState(""),[m,g]=i.exports.useState(""),h=l(b),[E,p]=r(v),y=async()=>{try{const e=await f.post("auth/login/",{username:u,password:m});console.log(e.data),e.data.token?(localStorage.setItem("authToken",e.data.token),p(e.data.token)):(localStorage.removeItem("authToken"),p(null))}catch(e){console.log(e),localStorage.removeItem("authToken"),p(null)}};switch(i.exports.useEffect((()=>{}),[]),h.state){case"hasValue":return(null==(e=h.contents)?void 0:e.isLoggedIn)?o.createElement(s,{to:t+"dashboard"}):o.createElement("div",null,o.createElement("h1",null,"Login"),o.createElement("button",{onClick:()=>n.push(t)},"Go home"),o.createElement("div",{className:"flex flex-col"},o.createElement("div",{className:"flex flex-col items-center"},o.createElement(x,{onChange:e=>d(e.target.value),value:u,type:"text",placeholder:"Username"}),o.createElement(x,{value:m,onChange:e=>g(e.target.value),type:"password",placeholder:"Password"})),o.createElement("div",{className:"flex justify-center"},o.createElement(I,{onClick:y},"Login"),o.createElement(C,null,"Sign Up"))));case"loading":return o.createElement("div",null,"Loading...");case"hasError":return o.createElement("div",null,"Error loading...")}},x=u.input`border-2 border-black w-60 m-2 p-2 rounded focus:outline-none`,w=u.button`transition-all rounded px-2 py-1 m-1`,I=u(w)`bg-blue-600 text-white hover:bg-blue-700`,C=u(w)`bg-transparent text-blue-600 hover:bg-blue-600 hover:text-white border-2 border-blue-600`,N=()=>{const e=a(k);return o.createElement("div",null,o.createElement(d,{to:e},"Home"),o.createElement(d,{to:e+"dashboard"},"Dashboard"),o.createElement(d,{to:e+"login"},"Login"))},T=()=>{const e=a(k);return o.createElement(o.Fragment,null,o.createElement("h1",null,e),o.createElement(m,null,o.createElement(N,null),o.createElement(g,null,o.createElement(h,{exact:!0,path:e},o.createElement(L,null)),o.createElement(h,{path:e+"dashboard"},o.createElement(y,null)),o.createElement(h,{path:e+"login"},o.createElement(S,null)))))};E.render(o.createElement(o.StrictMode,null,o.createElement(p,null,o.createElement(T,null))),document.getElementById("root"));
