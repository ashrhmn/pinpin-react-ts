var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(t,n,a)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a,c=(e,t)=>{for(var n in t||(t={}))l.call(t,n)&&o(e,n,t[n]);if(a)for(var n of a(t))r.call(t,n)&&o(e,n,t[n]);return e},s=(e,a)=>t(e,n(a));"undefined"!=typeof require&&require;import{a as u,R as i,b as m,_ as d,u as p,c as g,r as E,d as h,e as v,f as w,g as f,h as b,i as x,j as y,L as k,s as S,B as C,S as L,k as N,Q as j,l as D,m as Q,n as I}from"./vendor.aba13f60.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var M=u.create({baseURL:"https://pinash.herokuapp.com/api/",headers:{authToken:localStorage.getItem("authToken"),"Content-type":"Application/json"}});const T=i({key:"authUserState",get:async({get:e})=>{const t=e(P);if(!t)return{isLoggedIn:!1,user:null,msg:"Not logged in"};try{const e=await M.get("auth/authUser",{headers:{authToken:t}});return console.log(e.data),e.data}catch(n){throw n}}}),O=m({key:"isAddingNewData",default:!1}),P=m({key:"tokenState",default:localStorage.getItem("authToken")}),U=m({key:"baseUrlState",default:"/pinpin-react-ts/"}),V=m({key:"messageState",default:null}),B=()=>{const e=p(),[t,n]=g(O),[a,l]=E.exports.useState({id:0,username:"",name:"",description:"",secret:"",createdDate:"",updatedDate:""}),r=h((async({name:e,description:t,secret:n})=>{try{const a=await M.post("/pindata/",{name:e,description:""==t?null:t,secret:""==n?null:n});return console.log(a.data),a.data}catch(a){return console.log(a),null}}),{onMutate:async({name:t,description:n,secret:a})=>{console.log({name:t,description:n,secret:a}),await e.cancelQueries("pindata");const l=e.getQueryData("pindata");return console.log(l),l?(e.setQueryData("pindata",[...l,{name:t,description:n,secret:a}]),{preData:l}):(e.setQueryData("pindata",[]),null)},onError:(t,n,a)=>{console.log(t),e.setQueryData("pindata",null==a?void 0:a.preData)},onSettled:()=>{e.invalidateQueries("pindata")},onSuccess:()=>{n(!1)}});return v.createElement(F,null,v.createElement(A,null,v.createElement(z,null,"Name :"),v.createElement(q,{value:a.name,onChange:e=>l(s(c({},a),{name:e.target.value}))})),v.createElement(A,null,v.createElement(z,null,"Description :"),v.createElement(q,{value:a.description?a.description:"",onChange:e=>l(s(c({},a),{description:e.target.value}))})),v.createElement(A,null,v.createElement(z,null,"Secret :"),v.createElement(q,{value:a.secret,onChange:e=>l(s(c({},a),{secret:e.target.value}))})),v.createElement(H,null,v.createElement(W,{onClick:()=>r.mutate(a)},v.createElement(G,null),v.createElement("p",null,"Save")),v.createElement(W,{onClick:()=>n(!1)},v.createElement(R,null),v.createElement("p",null,"Cancel"))))},H=d.div`flex w-full justify-evenly mt-2`,F=d.div`flex flex-col items-center p-2 bg-green-600 rounded-lg text-lg`,W=d.button`text-green-100 bg-blue-700 rounded w-32 pl-5 pr-5 pt-2 pb-2 flex items-center space-x-2 justify-center`,z=d.h1`text-white`,A=d.div`flex items-center justify-between space-x-2 w-full`,q=d.input`border-2 border-green-700 rounded focus:outline-none p-1 mt-1 mb-1`,G=()=>v.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})),R=()=>v.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})),$=({data:e,setEditing:t})=>{const n=p(),[a,l]=E.exports.useState(e),r=h((async({id:e,name:t,description:n,secret:a})=>{try{const l=await M.put(`/pindata/id/${e}`,{name:t,description:""==n?null:n,secret:""==a?null:a});return console.log(l.data),l.data}catch(l){console.log(l)}}),{onMutate:async e=>{await n.cancelQueries("pindata");const t=n.getQueryData("pindata");return t?(n.setQueryData("pindata",null==t?void 0:t.filter((t=>t.id!=e.id?t:s(c({},t),{name:e.name,description:e.description,secret:e.secret})))),{predata:t}):null},onError:(e,t,a)=>{console.log(e),n.setQueryData("pindata",null==a?void 0:a.predata)},onSettled:()=>{n.invalidateQueries("pindata")},onSuccess:()=>{t(!1)}});return v.createElement(_,null,v.createElement(Y,null,v.createElement(X,null,"Name :"),v.createElement(Z,{value:a.name,onChange:e=>l(s(c({},a),{name:e.target.value}))})),v.createElement(Y,null,v.createElement(X,null,"Description :"),v.createElement(Z,{value:a.description?a.description:"",onChange:e=>l(s(c({},a),{description:e.target.value}))})),v.createElement(Y,null,v.createElement(X,null,"Secret :"),v.createElement(Z,{value:a.secret,onChange:e=>l(s(c({},a),{secret:e.target.value}))})),v.createElement(K,null,v.createElement(J,{onClick:()=>r.mutate(a)},v.createElement(ee,null),v.createElement("p",null,"Save")),v.createElement(J,{onClick:()=>t(!1)},v.createElement(te,null),v.createElement("p",null,"Cancel"))))},K=d.div`flex w-full justify-evenly mt-2`,_=d.div`flex flex-col items-center p-2 bg-green-600 rounded-lg text-lg`,J=d.button`text-green-100 bg-blue-700 rounded w-32 pl-5 pr-5 pt-2 pb-2 flex items-center space-x-2 justify-center`,X=d.h1`text-white`,Y=d.div`flex items-center justify-between space-x-2 w-full`,Z=d.input`border-2 border-green-700 rounded focus:outline-none p-1 mt-1 mb-1`,ee=()=>v.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})),te=()=>v.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})),ne=({data:e})=>{const[t,n]=E.exports.useState(!1),a=p(),l=h((async({id:e})=>{try{const t=await M.delete(`/pindata/id/${e}`);return console.log(t.data),t.data}catch(t){return console.log(t),t}}),{onMutate:async({id:e})=>{await a.cancelQueries("pindata");const t=a.getQueryData("pindata");return t?(a.setQueryData("pindata",null==t?void 0:t.filter((t=>t.id!=e))),{preData:t}):null},onError:(e,t,n)=>{console.log(e),a.setQueryData("pindata",null==n?void 0:n.preData)},onSettled:()=>{a.invalidateQueries("pindata")}});return v.createElement(v.Fragment,null,t?v.createElement($,{data:e,setEditing:n}):v.createElement("div",{className:"flex items-center justify-between text-2xl mt-4 mb-4 p-2 bg-blue-600 text-white rounded-lg"},v.createElement("div",{className:"flex flex-col w-2/3"},v.createElement("h1",null,e.name),v.createElement("p",null,e.description)),v.createElement("div",{className:"flex flex-col w-1/3"},v.createElement("p",{className:"break-words text-center"},e.secret),v.createElement("div",{className:"flex justify-evenly"},v.createElement("button",{onClick:()=>n(!0)},v.createElement(le,null)),v.createElement("button",{onClick:()=>l.mutate(e)},v.createElement(ae,null))))))},ae=()=>v.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})),le=()=>v.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})),re=()=>{const e=w("pindata",(()=>M.get("/pindata/",{headers:{authToken:localStorage.getItem("authToken")}}).then((e=>e.data))));switch(e.status){case"loading":return v.createElement(v.Fragment,null,"Loading...");case"error":return v.createElement(v.Fragment,null,"Error Loading PinData...");case"success":return v.createElement(v.Fragment,null,v.createElement("h1",null,"Success"),e.data.map((e=>v.createElement(ne,{key:e.id+e.name+e.description+e.secret+e.createdDate+e.updatedDate,data:e}))));case"idle":return v.createElement(v.Fragment,null,"Query Idle...")}},oe=()=>{var e,t;const n=f(U),a=b(T),[l,r]=g(P),[o,c]=g(O);switch(a.state){case"hasValue":return(null==(e=a.contents)?void 0:e.isLoggedIn)?v.createElement("div",null,v.createElement("h1",null,null==(t=a.contents)?void 0:t.user.username),v.createElement("button",{onClick:()=>c(!o),className:"flex items-center bg-green-600 text-white rounded p-2"},v.createElement(ce,null),v.createElement("p",null,"Add New")),o?v.createElement(B,null):v.createElement(v.Fragment,null),v.createElement(re,null),v.createElement("button",{onClick:()=>{localStorage.removeItem("authToken"),r(null)}},"Logout")):v.createElement(x,{to:n+"login"});case"loading":return v.createElement("div",null,"Loading...");case"hasError":return v.createElement(x,{to:n+"login"})}},ce=()=>v.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 14v6m-3-3h6M6 10h2a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v2a2 2 0 002 2zm10 0h2a2 2 0 002-2V6a2 2 0 00-2-2h-2a2 2 0 00-2 2v2a2 2 0 002 2zM6 20h2a2 2 0 002-2v-2a2 2 0 00-2-2H6a2 2 0 00-2 2v2a2 2 0 002 2z"})),se=()=>{const e=y(),t=f(U);return v.createElement("div",null,v.createElement("h1",null,"Home"),v.createElement("button",{onClick:()=>e.push(t+"login")},"Go Login"))},ue=()=>{var e;const t=f(U),n=y(),[a,l]=E.exports.useState(""),[r,o]=E.exports.useState(""),c=b(T),[s,u]=g(P),i=async()=>{try{const e=await M.post("auth/login/",{username:a,password:r});console.log(e.data),e.data.token?(localStorage.setItem("authToken",e.data.token),u(e.data.token)):(localStorage.removeItem("authToken"),u(null))}catch(e){console.log(e),localStorage.removeItem("authToken"),u(null)}};switch(c.state){case"hasValue":return(null==(e=c.contents)?void 0:e.isLoggedIn)?v.createElement(x,{to:t+"dashboard"}):v.createElement("div",null,v.createElement("h1",null,"Login"),v.createElement("button",{onClick:()=>n.push(t)},"Go home"),v.createElement("div",{className:"flex flex-col"},v.createElement("div",{className:"flex flex-col items-center"},v.createElement(ie,{onChange:e=>l(e.target.value),value:a,type:"text",placeholder:"Username"}),v.createElement(ie,{value:r,onChange:e=>o(e.target.value),type:"password",placeholder:"Password"})),v.createElement("div",{className:"flex justify-center"},v.createElement(de,{onClick:i},"Sign In"),v.createElement(pe,null,v.createElement(k,{to:t+"signup"},"Sign Up")))));case"loading":return v.createElement("div",null,"Loading...");case"hasError":return v.createElement("div",null,"Error loading...")}},ie=d.input`border-2 border-black w-60 m-2 p-2 rounded focus:outline-none`,me=d.button`transition-all rounded px-2 w-20 py-1 m-1`,de=d(me)`bg-blue-600 text-white hover:bg-blue-700`,pe=d(me)`bg-transparent text-blue-600 hover:bg-blue-600 hover:text-white border-2 border-blue-600`,ge=()=>{const e=f(U);return v.createElement("div",null,v.createElement(k,{to:e},"Home"),v.createElement(k,{to:e+"dashboard"},"Dashboard"),v.createElement(k,{to:e+"signup"},"SignUp"),v.createElement(k,{to:e+"login"},"Login"))},Ee=()=>{var e;const t=b(T),n=f(U),[a,l]=g(V),[r,o]=E.exports.useState(""),[c,s]=E.exports.useState(""),[u,i]=E.exports.useState(""),[m,d]=E.exports.useState(""),[p,h]=E.exports.useState("");let w;const y=async()=>{if(c!=u)return;const e=await M.post("/auth/signup/",{username:r,password:c,email:m,name:p});console.log(e.data),l(e.data.msg),w=setTimeout((()=>{l(null),clearTimeout(w)}),4e3)};switch(t.state){case"hasValue":return(null==(e=t.contents)?void 0:e.isLoggedIn)?v.createElement(x,{to:n+"dashboard"}):v.createElement("div",{className:"flex flex-col items-center"},v.createElement(he,{value:m,onChange:e=>d(e.target.value),placeholder:"Email"}),v.createElement(he,{value:c,onChange:e=>s(e.target.value),type:"password",placeholder:"Password"}),v.createElement(he,{value:u,onChange:e=>i(e.target.value),type:"password",placeholder:"Confirm Password"}),v.createElement(he,{value:r,onChange:e=>o(e.target.value),placeholder:"Username"}),v.createElement(he,{value:p,onChange:e=>h(e.target.value),placeholder:"Full Name"}),v.createElement("div",null,v.createElement(ve,{onClick:y},"Sign Up")),v.createElement("p",null,"Already have an account?"," ",v.createElement(k,{to:n+"login"},v.createElement("span",{className:"underline hover:text-blue-500 hover:no-underline transition-all"},"Sign In"))));case"loading":return v.createElement("div",null,"Loading...")}return v.createElement("div",null,"SignUp")},he=d.input`border-2 border-black w-60 m-2 p-2 rounded focus:outline-none`,ve=d(d.button`transition-all rounded w-60 px-2 py-2 m-1`)`bg-blue-600 text-white hover:bg-blue-700`,we=()=>{const e=f(U),t=f(V);return v.createElement(fe,{className:"bg-blue-300"},v.createElement("h1",null,e),v.createElement("h1",null,t),v.createElement(C,null,v.createElement(ge,null),v.createElement(L,null,v.createElement(N,{exact:!0,path:e},v.createElement(se,null)),v.createElement(N,{path:e+"dashboard"},v.createElement(oe,null)),v.createElement(N,{path:e+"login"},v.createElement(ue,null)),v.createElement(N,{path:e+"signup"},v.createElement(Ee,null)))))},fe=S.div`
  max-width: 400px;
  margin: 0 auto;
`,be=new j;D.render(v.createElement(v.StrictMode,null,v.createElement(Q,{client:be},v.createElement(I,null,v.createElement(we,null)))),document.getElementById("root"));
