import{a as e,R as t,b as a,c as n,d as l,e as r,f as o,g as s,u as c,_ as u,r as i,L as d,s as m,B as g,S as h,h as p,i as E,j as v}from"./vendor.d368e83c.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var b=e.create({baseURL:"https://pinash.herokuapp.com/api/",headers:{authToken:localStorage.getItem("authToken"),"Content-type":"Application/json"}});const f=t({key:"authUserState",get:async({get:e})=>{const t=e(k);if(!t)return{isLoggedIn:!1,user:null,msg:"Not logged in"};try{const e=await b.get("auth/authUser",{headers:{authToken:t}});return console.log(e.data),e.data}catch(a){throw a}}}),y=t({key:"pinDataState",get:async({get:e})=>{const t=e(k);if(t)try{const e=await b.get("/pindata/",{headers:{authToken:t}});return console.log(e.data),e.data}catch(a){return console.log(a),[]}}}),k=a({key:"tokenState",default:localStorage.getItem("authToken")}),S=a({key:"baseUrlState",default:"/pinpin-react-ts/"}),w=a({key:"messageState",default:null}),x=()=>{var e,t,a;const c=n(S),u=l(f),i=l(y),[d,m]=r(k);switch(u.state){case"hasValue":return(null==(e=u.contents)?void 0:e.isLoggedIn)?o.createElement("div",null,o.createElement("h1",null,null==(t=u.contents)?void 0:t.user.username),"hasValue"==i.state?null==(a=i.contents)?void 0:a.map((e=>o.createElement("li",{key:e.id+e.name+e.description+e.secret+e.createdDate+e.updatedDate},e.name+" "+e.description+" "+e.secret))):o.createElement(o.Fragment,null,"Loading PinData..."),o.createElement("button",{onClick:()=>{localStorage.removeItem("authToken"),m(null)}},"Logout")):o.createElement(s,{to:c+"login"});case"loading":return o.createElement("div",null,"Loading...");case"hasError":return o.createElement(s,{to:c+"login"})}},L=()=>{const e=c(),t=n(S);return o.createElement("div",null,o.createElement("h1",null,"Home"),o.createElement("button",{onClick:()=>e.push(t+"login")},"Go Login"))},C=()=>{var e;const t=n(S),a=c(),[u,m]=i.exports.useState(""),[g,h]=i.exports.useState(""),p=l(f),[E,v]=r(k),y=async()=>{try{const e=await b.post("auth/login/",{username:u,password:g});console.log(e.data),e.data.token?(localStorage.setItem("authToken",e.data.token),v(e.data.token)):(localStorage.removeItem("authToken"),v(null))}catch(e){console.log(e),localStorage.removeItem("authToken"),v(null)}};switch(p.state){case"hasValue":return(null==(e=p.contents)?void 0:e.isLoggedIn)?o.createElement(s,{to:t+"dashboard"}):o.createElement("div",null,o.createElement("h1",null,"Login"),o.createElement("button",{onClick:()=>a.push(t)},"Go home"),o.createElement("div",{className:"flex flex-col"},o.createElement("div",{className:"flex flex-col items-center"},o.createElement(I,{onChange:e=>m(e.target.value),value:u,type:"text",placeholder:"Username"}),o.createElement(I,{value:g,onChange:e=>h(e.target.value),type:"password",placeholder:"Password"})),o.createElement("div",{className:"flex justify-center"},o.createElement(N,{onClick:y},"Sign In"),o.createElement(U,null,o.createElement(d,{to:t+"signup"},"Sign Up")))));case"loading":return o.createElement("div",null,"Loading...");case"hasError":return o.createElement("div",null,"Error loading...")}},I=u.input`border-2 border-black w-60 m-2 p-2 rounded focus:outline-none`,T=u.button`transition-all rounded px-2 w-20 py-1 m-1`,N=u(T)`bg-blue-600 text-white hover:bg-blue-700`,U=u(T)`bg-transparent text-blue-600 hover:bg-blue-600 hover:text-white border-2 border-blue-600`,D=()=>{const e=n(S);return o.createElement("div",null,o.createElement(d,{to:e},"Home"),o.createElement(d,{to:e+"dashboard"},"Dashboard"),o.createElement(d,{to:e+"signup"},"SignUp"),o.createElement(d,{to:e+"login"},"Login"))},P=()=>{var e;const t=l(f),a=n(S),[c,u]=r(w),[m,g]=i.exports.useState(""),[h,p]=i.exports.useState(""),[E,v]=i.exports.useState(""),[y,k]=i.exports.useState(""),[x,L]=i.exports.useState("");let C;const I=async()=>{if(h!=E)return;const e=await b.post("/auth/signup/",{username:m,password:h,email:y,name:x});console.log(e.data),u(e.data.msg),C=setTimeout((()=>{u(null),clearTimeout(C)}),4e3)};switch(t.state){case"hasValue":return(null==(e=t.contents)?void 0:e.isLoggedIn)?o.createElement(s,{to:a+"dashboard"}):o.createElement("div",{className:"flex flex-col items-center"},o.createElement(j,{value:y,onChange:e=>k(e.target.value),placeholder:"Email"}),o.createElement(j,{value:h,onChange:e=>p(e.target.value),type:"password",placeholder:"Password"}),o.createElement(j,{value:E,onChange:e=>v(e.target.value),type:"password",placeholder:"Confirm Password"}),o.createElement(j,{value:m,onChange:e=>g(e.target.value),placeholder:"Username"}),o.createElement(j,{value:x,onChange:e=>L(e.target.value),placeholder:"Full Name"}),o.createElement("div",null,o.createElement(V,{onClick:I},"Sign Up")),o.createElement("p",null,"Already have an account?"," ",o.createElement(d,{to:a+"login"},o.createElement("span",{className:"underline hover:text-blue-500 hover:no-underline transition-all"},"Sign In"))));case"loading":return o.createElement("div",null,"Loading...")}return o.createElement("div",null,"SignUp")},j=u.input`border-2 border-black w-60 m-2 p-2 rounded focus:outline-none`,V=u(u.button`transition-all rounded w-60 px-2 py-2 m-1`)`bg-blue-600 text-white hover:bg-blue-700`,A=()=>{const e=n(S),t=n(w);return o.createElement(B,null,o.createElement("h1",null,e),o.createElement("h1",null,t),o.createElement(g,null,o.createElement(D,null),o.createElement(h,null,o.createElement(p,{exact:!0,path:e},o.createElement(L,null)),o.createElement(p,{path:e+"dashboard"},o.createElement(x,null)),o.createElement(p,{path:e+"login"},o.createElement(C,null)),o.createElement(p,{path:e+"signup"},o.createElement(P,null)))))},B=m.div`
  max-width: 500px;
  margin: 0 auto;
`;E.render(o.createElement(o.StrictMode,null,o.createElement(v,null,o.createElement(A,null))),document.getElementById("root"));
