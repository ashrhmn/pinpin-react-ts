var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(t,n,a)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a,c=(e,t)=>{for(var n in t||(t={}))l.call(t,n)&&o(e,n,t[n]);if(a)for(var n of a(t))r.call(t,n)&&o(e,n,t[n]);return e},s=(e,a)=>t(e,n(a));"undefined"!=typeof require&&require;import{a as u,R as i,b as m,_ as d,u as g,c as p,r as E,d as h,e as v,f as w,g as f,h as b,i as x,j as k,L as y,s as S,B as L,S as C,k as N,Q as j,l as D,m as T,n as I}from"./vendor.aba13f60.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var M=u.create({baseURL:"https://pinash.herokuapp.com/api/",headers:{authToken:localStorage.getItem("authToken"),"Content-type":"Application/json"}});const Q=i({key:"authUserState",get:async({get:e})=>{const t=e(V);if(!t)return{isLoggedIn:!1,user:null,msg:"Not logged in"};try{const e=await M.get("auth/authUser",{headers:{authToken:t}});return console.log(e.data),e.data}catch(n){throw n}}}),H=m({key:"isAddingNewData",default:!1}),V=m({key:"tokenState",default:localStorage.getItem("authToken")}),P=m({key:"baseUrlState",default:"/pinpin-react-ts/"}),B=m({key:"messageState",default:null}),F=m({key:"messageTimeoutIdState",default:0}),U=(e,t,n=2e3)=>{t(e),console.log("Showing Message : ",e);const a=setTimeout((()=>{t(null),console.log("Closing Message : ",e),console.log("tout id : ",a),clearTimeout(a)}),n)},z=()=>{const e=g(),[,t]=p(H),[,n]=p(B),[a,l]=E.exports.useState({id:0,username:"",name:"",description:"",secret:"",createdDate:"",updatedDate:""}),r=h((async({name:e,description:t,secret:n})=>{try{const a=await M.post("/pindata/",{name:e,description:""==t?null:t,secret:""==n?null:n},{headers:{authToken:localStorage.getItem("authToken")}});return console.log(a.data),a.data}catch(a){return console.log(a),null}}),{onMutate:async({name:a,description:l,secret:r})=>{t(!1),n("Saving New Data"),console.log({name:a,description:l,secret:r}),await e.cancelQueries("pindata");const o=e.getQueryData("pindata");return console.log(o),o?(e.setQueryData("pindata",[...o,{name:a,description:l,secret:r}]),{preData:o}):(e.setQueryData("pindata",[]),null)},onError:(t,a,l)=>{U("Saving Error",n),console.log(t),e.setQueryData("pindata",null==l?void 0:l.preData)},onSettled:()=>{e.invalidateQueries("pindata")},onSuccess:()=>{U("Saved Successfully",n)}});return v.createElement(W,null,v.createElement(R,null,v.createElement(q,null,"Name :"),v.createElement($,{value:a.name,onChange:e=>l(s(c({},a),{name:e.target.value}))})),v.createElement(R,null,v.createElement(q,null,"Description :"),v.createElement($,{value:a.description?a.description:"",onChange:e=>l(s(c({},a),{description:e.target.value}))})),v.createElement(R,null,v.createElement(q,null,"Secret :"),v.createElement($,{value:a.secret,onChange:e=>l(s(c({},a),{secret:e.target.value}))})),v.createElement(O,null,v.createElement(A,{onClick:()=>r.mutate(a)},v.createElement(G,null),v.createElement("p",null,"Save")),v.createElement(A,{onClick:()=>t(!1)},v.createElement(K,null),v.createElement("p",null,"Cancel"))))},O=d.div`flex w-full justify-evenly mt-2`,W=d.div`flex flex-col items-center p-2 bg-green-600 rounded-lg text-lg mt-2 mb-2`,A=d.button`text-green-100 bg-blue-700 rounded w-32 pl-5 pr-5 pt-2 pb-2 flex items-center space-x-2 justify-center`,q=d.h1`text-white`,R=d.div`flex items-center justify-between space-x-2 w-full`,$=d.input`border-2 border-green-700 rounded focus:outline-none p-1 mt-1 mb-1 w-60`,G=()=>v.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})),K=()=>v.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})),_=({data:e,setEditing:t})=>{const n=g(),[a,l]=E.exports.useState(e),[,r]=p(B),o=h((async({id:e,name:t,description:n,secret:a})=>{try{const l=await M.put(`/pindata/id/${e}`,{name:t,description:""==n?null:n,secret:""==a?null:a},{headers:{authToken:localStorage.getItem("authToken")}});return console.log(l.data),l.data}catch(l){console.log(l)}}),{onMutate:async e=>{t(!1),r("Saving Edits"),await n.cancelQueries("pindata");const a=n.getQueryData("pindata");return a?(n.setQueryData("pindata",null==a?void 0:a.filter((t=>t.id!=e.id?t:s(c({},t),{name:e.name,description:e.description,secret:e.secret})))),{predata:a}):null},onError:(e,t,a)=>{U("Error saving edits, reverting.....",r),console.log(e),n.setQueryData("pindata",null==a?void 0:a.predata)},onSettled:()=>{n.invalidateQueries("pindata")},onSuccess:()=>{U("Edit saved successfully",r)}});return v.createElement(X,null,v.createElement(ee,null,v.createElement(Z,null,"Name :"),v.createElement(te,{value:a.name,onChange:e=>l(s(c({},a),{name:e.target.value}))})),v.createElement(ee,null,v.createElement(Z,null,"Description :"),v.createElement(te,{value:a.description?a.description:"",onChange:e=>l(s(c({},a),{description:e.target.value}))})),v.createElement(ee,null,v.createElement(Z,null,"Secret :"),v.createElement(te,{value:a.secret,onChange:e=>l(s(c({},a),{secret:e.target.value}))})),v.createElement(J,null,v.createElement(Y,{onClick:()=>o.mutate(a)},v.createElement(ne,null),v.createElement("p",null,"Save")),v.createElement(Y,{onClick:()=>t(!1)},v.createElement(ae,null),v.createElement("p",null,"Cancel"))))},J=d.div`flex w-full justify-evenly mt-2`,X=d.div`flex flex-col items-center p-2 bg-green-600 rounded-lg text-lg mt-2 mb-2`,Y=d.button`text-green-100 bg-blue-700 rounded w-32 pl-5 pr-5 pt-2 pb-2 flex items-center space-x-2 justify-center`,Z=d.h1`text-white`,ee=d.div`flex items-center justify-between space-x-2 w-full`,te=d.input`border-2 border-green-700 rounded focus:outline-none p-1 mt-1 mb-1 w-60`,ne=()=>v.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})),ae=()=>v.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})),le=({data:e})=>{const[t,n]=E.exports.useState(!1),a=g(),[,l]=p(B),r=h((async({id:e})=>{try{const t=await M.delete(`/pindata/id/${e}`,{headers:{authToken:localStorage.getItem("authToken")}});return console.log(t.data),t.data}catch(t){return console.log(t),t}}),{onMutate:async({id:e})=>{l("Deleting..."),await a.cancelQueries("pindata");const t=a.getQueryData("pindata");return t?(a.setQueryData("pindata",null==t?void 0:t.filter((t=>t.id!=e))),{preData:t}):null},onError:(e,t,n)=>{U("Error deleting data, reverting....",l),console.log(e),a.setQueryData("pindata",null==n?void 0:n.preData)},onSettled:()=>{a.invalidateQueries("pindata")},onSuccess:()=>{U("Deleted succesfully",l)}});return v.createElement(v.Fragment,null,t?v.createElement(_,{data:e,setEditing:n}):v.createElement("div",{className:"flex items-center justify-between text-2xl mt-4 mb-4 p-2 bg-blue-600 text-white rounded-lg"},v.createElement("div",{className:"flex flex-col w-2/3"},v.createElement("h1",null,e.name),v.createElement("p",null,e.description)),v.createElement("div",{className:"flex flex-col w-1/3"},v.createElement("p",{className:"break-words text-center"},e.secret),v.createElement("div",{className:"flex justify-evenly"},v.createElement("button",{onClick:()=>n(!0)},v.createElement(oe,null)),v.createElement("button",{onClick:()=>r.mutate(e)},v.createElement(re,null))))))},re=()=>v.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})),oe=()=>v.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})),ce=()=>{const e=w("pindata",(()=>M.get("/pindata/",{headers:{authToken:localStorage.getItem("authToken")}}).then((e=>e.data))));switch(e.status){case"loading":return v.createElement(v.Fragment,null,"Loading...");case"error":return v.createElement(v.Fragment,null,"Error Loading PinData...");case"success":return v.createElement(v.Fragment,null,e.data.map((e=>v.createElement(le,{key:e.id+e.name+e.description+e.secret+e.createdDate+e.updatedDate,data:e}))));case"idle":return v.createElement(v.Fragment,null,"Query Idle...")}},se=()=>{var e,t;const n=f(P),a=b(Q);switch(a.state){case"hasValue":return(null==(e=a.contents)?void 0:e.isLoggedIn)?v.createElement("div",null,v.createElement("h1",null,null==(t=a.contents)?void 0:t.user.username),v.createElement(ie,null),v.createElement(ce,null),v.createElement(ue,null)):v.createElement(x,{to:n+"login"});case"loading":return v.createElement("div",null,"Loading...");case"hasError":return v.createElement(x,{to:n+"login"})}},ue=()=>{const[,e]=p(V),[,t]=p(B);return v.createElement("button",{onClick:()=>{localStorage.removeItem("authToken"),e(null),U("Logged out",t)}},"Logout")},ie=()=>{const[e,t]=p(H);return v.createElement(v.Fragment,null,v.createElement("button",{onClick:()=>t(!e),className:"flex items-center bg-green-600 text-white rounded p-2"},v.createElement(me,null),v.createElement("p",null,"Add New")),e?v.createElement(z,null):v.createElement(v.Fragment,null))},me=()=>v.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 14v6m-3-3h6M6 10h2a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v2a2 2 0 002 2zm10 0h2a2 2 0 002-2V6a2 2 0 00-2-2h-2a2 2 0 00-2 2v2a2 2 0 002 2zM6 20h2a2 2 0 002-2v-2a2 2 0 00-2-2H6a2 2 0 00-2 2v2a2 2 0 002 2z"})),de=()=>{const e=k(),t=f(P);return v.createElement("div",null,v.createElement("h1",null,"Home"),v.createElement("button",{onClick:()=>e.push(t+"login")},"Go Login"))},ge=()=>{var e;const t=f(P);k();const[n,a]=E.exports.useState(""),[l,r]=E.exports.useState(""),o=b(Q),[,c]=p(V),[,s]=p(B);p(F);const u=async()=>{try{const e=await M.post("auth/login/",{username:n,password:l});console.log(e.data),e.data.token?(localStorage.setItem("authToken",e.data.token),c(e.data.token),U(e.data.msg,s)):(localStorage.removeItem("authToken"),c(null))}catch(e){console.log(e),localStorage.removeItem("authToken"),c(null)}};switch(o.state){case"hasValue":return(null==(e=o.contents)?void 0:e.isLoggedIn)?v.createElement(x,{to:t+"dashboard"}):v.createElement("div",null,v.createElement("div",{className:"flex flex-col"},v.createElement("div",{className:"flex flex-col items-center"},v.createElement(pe,{onChange:e=>a(e.target.value),value:n,type:"text",placeholder:"Username"}),v.createElement(pe,{value:l,onChange:e=>r(e.target.value),type:"password",placeholder:"Password"})),v.createElement("div",{className:"flex justify-center"},v.createElement(he,{onClick:u},"Sign In"),v.createElement(ve,null,v.createElement(y,{to:t+"signup"},"Sign Up")))));case"loading":return v.createElement("div",null,"Loading...");case"hasError":return v.createElement("div",null,"Error loading...")}},pe=d.input`border-2 border-black w-60 m-2 p-2 rounded focus:outline-none`,Ee=d.button`transition-all rounded px-2 w-20 py-1 m-1`,he=d(Ee)`bg-blue-600 text-white hover:bg-blue-700`,ve=d(Ee)`bg-transparent text-blue-600 hover:bg-blue-600 hover:text-white border-2 border-blue-600`,we=()=>{const[e,t]=p(B);return v.createElement("div",null,e?v.createElement("div",{className:"flex items-center space-x-3 bg-blue-700 rounded text-white justify-center shadow-lg px-2 py-1 m-2 absolute bottom-2 right-2"},v.createElement("h1",null,e),v.createElement("button",{className:"bg-red-700 text-white rounded-full",onClick:()=>t(null)},v.createElement(fe,null))):v.createElement(v.Fragment,null))},fe=()=>v.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})),be=()=>{var e;const t=f(P),n=b(Q);switch(n.state){case"hasValue":return(null==(e=n.contents)?void 0:e.isLoggedIn)?v.createElement(xe,null,v.createElement("div",null,v.createElement(y,{to:t},v.createElement(ye,null,"Home"))),v.createElement(ke,null,v.createElement(y,{to:t+"dashboard"},v.createElement(ye,null,v.createElement(Se,null),v.createElement("p",null,"Dashboard"))),v.createElement(Le,null))):v.createElement(xe,null,v.createElement("div",null,v.createElement(y,{to:t},v.createElement(ye,null,"Home"))),v.createElement(ke,null,v.createElement(y,{to:t+"login"},v.createElement(ye,null,"Login"))));case"loading":return v.createElement(v.Fragment,null,"Loading...");case"hasError":return v.createElement(v.Fragment,null,v.createElement("h1",{className:"text-red-600"},"Error loading Conditional Nav, showing all routes"),v.createElement(xe,null,v.createElement("div",null,v.createElement(y,{to:t},v.createElement(ye,null,"Home"))),v.createElement(ke,null,v.createElement(y,{to:t+"signup"},v.createElement(ye,null,"SignUp")),v.createElement(y,{to:t+"login"},v.createElement(ye,null,"Login")),v.createElement(y,{to:t+"dashboard"},v.createElement(ye,null,"Dashboard")))))}},xe=d.div`flex justify-between mt-4`,ke=d.div`flex space-x-3`,ye=d.button`bg-blue-700 text-white rounded hover:bg-blue-900 transition-all px-2 py-1 flex items-center space-x-1`,Se=()=>v.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})),Le=()=>{const[,e]=p(V),[,t]=p(B);return v.createElement(ye,{onClick:()=>{localStorage.removeItem("authToken"),e(null),U("Logged out",t)}},"Logout")},Ce=()=>{var e;const t=b(Q),n=f(P),[a,l]=p(B),[r,o]=E.exports.useState(""),[c,s]=E.exports.useState(""),[u,i]=E.exports.useState(""),[m,d]=E.exports.useState(""),[g,h]=E.exports.useState("");let w;const k=async()=>{if(""==r)return l("Username can not be empty"),void(w=setTimeout((()=>{l(null),clearTimeout(w)}),2e3));if(c!=u)return l("Passwords don't match"),void(w=setTimeout((()=>{l(null),clearTimeout(w)}),2e3));if(""==c)return l("Password can not be empty"),void(w=setTimeout((()=>{l(null),clearTimeout(w)}),2e3));const e=await M.post("/auth/signup/",{username:r,password:c,email:m,name:g});console.log(e.data),l(e.data.msg),w=setTimeout((()=>{l(null),clearTimeout(w)}),2e3)};switch(t.state){case"hasValue":return(null==(e=t.contents)?void 0:e.isLoggedIn)?v.createElement(x,{to:n+"dashboard"}):v.createElement("div",{className:"flex flex-col items-center"},v.createElement(Ne,{value:m,onChange:e=>d(e.target.value),placeholder:"Email"}),v.createElement(Ne,{value:c,onChange:e=>s(e.target.value),type:"password",placeholder:"Password"}),v.createElement(Ne,{value:u,onChange:e=>i(e.target.value),type:"password",placeholder:"Confirm Password"}),v.createElement(Ne,{value:r,onChange:e=>o(e.target.value),placeholder:"Username"}),v.createElement(Ne,{value:g,onChange:e=>h(e.target.value),placeholder:"Full Name"}),v.createElement("div",null,v.createElement(je,{onClick:k},"Sign Up")),v.createElement("p",null,"Already have an account?"," ",v.createElement(y,{to:n+"login"},v.createElement("span",{className:"underline hover:text-blue-500 hover:no-underline transition-all"},"Sign In"))));case"loading":return v.createElement("div",null,"Loading...")}return v.createElement("div",null,"SignUp")},Ne=d.input`border-2 border-black w-60 m-2 p-2 rounded focus:outline-none`,je=d(d.button`transition-all rounded w-60 px-2 py-2 m-1`)`bg-blue-600 text-white hover:bg-blue-700`,De=()=>{const e=f(P);return v.createElement(Te,{className:""},v.createElement(L,null,v.createElement(be,null),v.createElement("div",{className:"flex justify-center"},v.createElement(we,null)),v.createElement(C,null,v.createElement(N,{exact:!0,path:e},v.createElement(de,null)),v.createElement(N,{path:e+"dashboard"},v.createElement(se,null)),v.createElement(N,{path:e+"login"},v.createElement(ge,null)),v.createElement(N,{path:e+"signup"},v.createElement(Ce,null)))))},Te=S.div`
  max-width: 400px;
  margin: 0 auto;
  padding: 0 1rem;
`,Ie=new j;D.render(v.createElement(v.StrictMode,null,v.createElement(T,{client:Ie},v.createElement(I,null,v.createElement(De,null)))),document.getElementById("root"));
